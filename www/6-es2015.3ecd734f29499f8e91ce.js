(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Wrxl:function(n,l,t){"use strict";t.r(l);var u=t("8Y7J"),e=t("mrSG"),o=t("jHPu"),i=t("ZZ/e");class r{constructor(n,l,t,u){this.chatSrv=n,this.alert=l,this.router=t,this.toast=u,this.currentUser="Claudia"}ngOnInit(){return e.__awaiter(this,void 0,void 0,function*(){localStorage.getItem("token")?(this.chatSrv.registerDb(),this.obtenerConversacion()):this.obtenerConversacion()})}makeToast(n){return e.__awaiter(this,void 0,void 0,function*(){(yield this.toast.create({message:n,duration:5e3,position:"top",showCloseButton:!0,closeButtonText:"dismiss"})).present()})}obtenerConversacion(){console.log(this.conversacion);const n=localStorage.getItem("uid");this.chatSrv.getChatRoom(n).subscribe(n=>{this.conversacion=n,console.log("this.conversacion:",this.conversacion)}),setTimeout(()=>{this.content.scrollToBottom(300)},300)}sendMessage(){const n={content:this.msg,type:"text",date:new Date,user:localStorage.getItem("name")},l=localStorage.getItem("uid");this.chatSrv.sendMessageToFirebase(n,l),this.msg="",setTimeout(()=>{this.content.scrollToBottom(300)},500)}}class a{}var s=t("pMnS"),b=t("oBZk"),c=t("SVse"),g=t("s7LF"),d=t("iInd"),m=u.pb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]   #areaMensajes[_ngcontent-%COMP%]{background:#f3f3f3!important;min-height:85vh;height:auto}ion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{background:#fff!important}.message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:#ffc839;color:#fff}.my-message[_ngcontent-%COMP%]{background:#26baf5;color:#fff}.time[_ngcontent-%COMP%]{color:#ebe9e9;float:right;font-size:small}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em;font-size:1em}.message-input[_ngcontent-%COMP%]{height:40px;width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}#positionFixed[_ngcontent-%COMP%]{position:fixed!important;left:67%}.mamas[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-align:center}ion-footer[_ngcontent-%COMP%]{margin:0;padding:0 0 5px}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-bottom:none}.proximamente[_ngcontent-%COMP%]{text-align:center;font-size:1.4em}"]],data:{}});function p(n){return u.Mb(0,[(n()(),u.rb(0,0,null,null,9,"ion-col",[["class","message other-message"],["size","8"]],null,null,null,b.Y,b.j)),u.qb(1,49152,null,0,i.u,[u.h,u.k,u.x],{size:[0,"size"]},null),(n()(),u.rb(2,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),u.Kb(3,null,["",""])),(n()(),u.rb(4,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),u.rb(5,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),u.Kb(6,null,["",""])),(n()(),u.rb(7,0,null,0,2,"div",[["class","time"],["text-right",""]],null,null,null,null,null)),(n()(),u.Kb(8,null,[" "," "])),u.Gb(9,2)],function(n,l){n(l,1,0,"8")},function(n,l){n(l,3,0,l.parent.context.$implicit.user),n(l,6,0,l.parent.context.$implicit.content);var t=u.Lb(l,8,0,n(l,9,0,u.Db(l.parent.parent.parent,0),l.parent.context.$implicit.date.toDate(),"short"));n(l,8,0,t)})}function h(n){return u.Mb(0,[(n()(),u.rb(0,0,null,null,9,"ion-col",[["class","message my-message"],["offset","4"],["size","8"]],null,null,null,b.Y,b.j)),u.qb(1,49152,null,0,i.u,[u.h,u.k,u.x],{offset:[0,"offset"],size:[1,"size"]},null),(n()(),u.rb(2,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),u.Kb(3,null,["",""])),(n()(),u.rb(4,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),u.rb(5,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),u.Kb(6,null,["",""])),(n()(),u.rb(7,0,null,0,2,"div",[["class","time"],["text-right",""]],null,null,null,null,null)),(n()(),u.Kb(8,null,[" "," "])),u.Gb(9,2)],function(n,l){n(l,1,0,"4","8")},function(n,l){n(l,3,0,l.parent.context.$implicit.user),n(l,6,0,l.parent.context.$implicit.content);var t=u.Lb(l,8,0,n(l,9,0,u.Db(l.parent.parent.parent,0),l.parent.context.$implicit.date.toDate(),"short"));n(l,8,0,t)})}function f(n){return u.Mb(0,[(n()(),u.rb(0,0,null,null,5,"ion-row",[],null,null,null,b.qb,b.B)),u.qb(1,49152,null,0,i.jb,[u.h,u.k,u.x],null,null),(n()(),u.hb(16777216,null,0,1,null,p)),u.qb(3,16384,null,0,c.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(n()(),u.hb(16777216,null,0,1,null,h)),u.qb(5,16384,null,0,c.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,t.currentUser===l.context.$implicit.user),n(l,5,0,l.context.$implicit.user!==t.currentUser)},null)}function x(n){return u.Mb(0,[(n()(),u.rb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),u.hb(16777216,null,null,1,null,f)),u.qb(2,278528,null,0,c.l,[u.N,u.K,u.q],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.conversacion.messages)},null)}function v(n){return u.Mb(0,[u.Eb(0,c.d,[u.s]),u.Ib(671088640,1,{content:0}),(n()(),u.rb(2,0,null,null,10,"ion-header",[],null,null,null,b.fb,b.q)),u.qb(3,49152,null,0,i.C,[u.h,u.k,u.x],null,null),(n()(),u.rb(4,0,null,0,8,"ion-toolbar",[["color","rosado"]],null,null,null,b.Db,b.O)),u.qb(5,49152,null,0,i.Cb,[u.h,u.k,u.x],{color:[0,"color"]},null),(n()(),u.rb(6,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,b.T,b.e)),u.qb(7,49152,null,0,i.m,[u.h,u.k,u.x],null,null),(n()(),u.rb(8,0,null,0,1,"ion-menu-button",[],null,null,null,b.lb,b.x)),u.qb(9,49152,null,0,i.S,[u.h,u.k,u.x],null,null),(n()(),u.rb(10,0,null,0,2,"ion-title",[],null,null,null,b.Cb,b.N)),u.qb(11,49152,null,0,i.Ab,[u.h,u.k,u.x],null,null),(n()(),u.Kb(-1,0,["chat"])),(n()(),u.rb(13,0,null,null,3,"ion-content",[["padding",""]],null,null,null,b.Z,b.k)),u.qb(14,49152,[[1,4]],0,i.v,[u.h,u.k,u.x],null,null),(n()(),u.hb(16777216,null,0,1,null,x)),u.qb(16,16384,null,0,c.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(n()(),u.rb(17,0,null,null,14,"ion-footer",[["padding",""]],null,null,null,b.db,b.o)),u.qb(18,49152,null,0,i.A,[u.h,u.k,u.x],null,null),(n()(),u.rb(19,0,null,0,12,"ion-item",[],null,null,null,b.ib,b.t)),u.qb(20,49152,null,0,i.I,[u.h,u.k,u.x],null,null),(n()(),u.rb(21,0,null,0,6,"ion-textarea",[["autosize",""],["class","message-input"],["value","ingresa tu mensaje"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var e=!0,o=n.component;return"ionBlur"===l&&(e=!1!==u.Db(n,22)._handleBlurEvent()&&e),"ionChange"===l&&(e=!1!==u.Db(n,22)._handleInputEvent(t.target.value)&&e),"ngModelChange"===l&&(e=!1!==(o.msg=t)&&e),e},b.Bb,b.M)),u.qb(22,16384,null,0,i.Qb,[u.k],null,null),u.Hb(1024,null,g.i,function(n){return[n]},[i.Qb]),u.qb(24,671744,null,0,g.n,[[8,null],[8,null],[8,null],[6,g.i]],{model:[0,"model"]},{update:"ngModelChange"}),u.Hb(2048,null,g.j,null,[g.n]),u.qb(26,16384,null,0,g.k,[[4,g.j]],null,null),u.qb(27,49152,null,0,i.yb,[u.h,u.k,u.x],{value:[0,"value"]},null),(n()(),u.rb(28,0,null,0,3,"ion-button",[["class","msg-btn"],["color","primary"],["expand","block"],["fill","clear"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.sendMessage()&&u),u},b.S,b.d)),u.qb(29,49152,null,0,i.l,[u.h,u.k,u.x],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(n()(),u.rb(30,0,null,0,1,"ion-icon",[["name","send"]],null,null,null,b.gb,b.r)),u.qb(31,49152,null,0,i.D,[u.h,u.k,u.x],{name:[0,"name"]},null)],function(n,l){var t=l.component;n(l,5,0,"rosado"),n(l,16,0,t.conversacion),n(l,24,0,t.msg),n(l,27,0,"ingresa tu mensaje"),n(l,29,0,"primary","block","clear"),n(l,31,0,"send")},function(n,l){n(l,21,0,u.Db(l,26).ngClassUntouched,u.Db(l,26).ngClassTouched,u.Db(l,26).ngClassPristine,u.Db(l,26).ngClassDirty,u.Db(l,26).ngClassValid,u.Db(l,26).ngClassInvalid,u.Db(l,26).ngClassPending)})}function C(n){return u.Mb(0,[(n()(),u.rb(0,0,null,null,1,"app-chat",[],null,null,null,v,m)),u.qb(1,114688,null,0,r,[o.a,i.a,d.m,i.Rb],null,null)],function(n,l){n(l,1,0)},null)}var M=u.nb("app-chat",r,C,{},{},[]);t.d(l,"ChatPageModuleNgFactory",function(){return k});var k=u.ob(a,[],function(n){return u.Ab([u.Bb(512,u.j,u.ab,[[8,[s.a,M]],[3,u.j],u.v]),u.Bb(4608,c.o,c.n,[u.s,[2,c.E]]),u.Bb(4608,g.s,g.s,[]),u.Bb(4608,i.b,i.b,[u.x,u.g]),u.Bb(4608,i.Ib,i.Ib,[i.b,u.j,u.p]),u.Bb(4608,i.Mb,i.Mb,[i.b,u.j,u.p]),u.Bb(1073742336,c.b,c.b,[]),u.Bb(1073742336,g.r,g.r,[]),u.Bb(1073742336,g.e,g.e,[]),u.Bb(1073742336,i.Eb,i.Eb,[]),u.Bb(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),u.Bb(1073742336,a,a,[]),u.Bb(1024,d.k,function(){return[[{path:"",component:r}]]},[])])})}}]);